<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>è·‘æ­¥æ— ä¼¤ç›‘æ§ç³»ç»Ÿ | Running Monitoring Dashboard</title>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/Chart.js/3.9.1/chart.min.js"></script>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, 'Helvetica Neue', Arial, sans-serif;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
            padding: 20px;
        }

        .container {
            max-width: 1400px;
            margin: 0 auto;
            background: white;
            border-radius: 12px;
            box-shadow: 0 20px 60px rgba(0, 0, 0, 0.3);
            overflow: hidden;
        }

        .header {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            padding: 30px;
            text-align: center;
        }

        .header h1 {
            font-size: 28px;
            margin-bottom: 10px;
        }

        .header p {
            font-size: 14px;
            opacity: 0.9;
        }

        .tabs {
            display: flex;
            background: #f5f5f5;
            border-bottom: 1px solid #e0e0e0;
            overflow-x: auto;
        }

        .tab-btn {
            flex: 1;
            padding: 15px;
            background: none;
            border: none;
            cursor: pointer;
            font-size: 14px;
            font-weight: 600;
            color: #666;
            border-bottom: 3px solid transparent;
            transition: all 0.3s ease;
        }

        .tab-btn:hover {
            background: #efefef;
        }

        .tab-btn.active {
            color: #667eea;
            border-bottom-color: #667eea;
        }

        .tab-content {
            display: none;
            padding: 30px;
        }

        .tab-content.active {
            display: block;
        }

        .form-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 20px;
            margin-bottom: 20px;
        }

        .form-group {
            display: flex;
            flex-direction: column;
        }

        .form-group label {
            margin-bottom: 8px;
            font-weight: 600;
            color: #333;
            font-size: 14px;
        }

        .form-group input,
        .form-group textarea,
        .form-group select {
            padding: 10px;
            border: 1px solid #ddd;
            border-radius: 6px;
            font-size: 14px;
            font-family: inherit;
        }

        .form-group input:focus,
        .form-group textarea:focus,
        .form-group select:focus {
            outline: none;
            border-color: #667eea;
            box-shadow: 0 0 0 3px rgba(102, 126, 234, 0.1);
        }

        .form-group textarea {
            resize: vertical;
            min-height: 80px;
        }

        button {
            padding: 12px 24px;
            background: #667eea;
            color: white;
            border: none;
            border-radius: 6px;
            font-weight: 600;
            cursor: pointer;
            font-size: 14px;
            transition: all 0.3s ease;
        }

        button:hover {
            background: #5568d3;
            transform: translateY(-2px);
            box-shadow: 0 5px 15px rgba(102, 126, 234, 0.3);
        }

        .table-container {
            overflow-x: auto;
            margin-top: 20px;
        }

        table {
            width: 100%;
            border-collapse: collapse;
            font-size: 14px;
        }

        th {
            background: #f5f5f5;
            padding: 12px;
            text-align: left;
            font-weight: 600;
            color: #333;
            border-bottom: 2px solid #ddd;
        }

        td {
            padding: 12px;
            border-bottom: 1px solid #e0e0e0;
        }

        tr:hover {
            background: #fafafa;
        }

        .delete-btn {
            background: #ff6b6b;
            padding: 6px 12px;
            font-size: 12px;
        }

        .delete-btn:hover {
            background: #ff5252;
        }

        .status-safe {
            color: #27ae60;
            font-weight: 600;
        }

        .status-warning {
            color: #f39c12;
            font-weight: 600;
        }

        .status-danger {
            color: #e74c3c;
            font-weight: 600;
        }

        .chart-container {
            position: relative;
            height: 400px;
            margin: 30px 0;
        }

        .stats-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            gap: 20px;
            margin-bottom: 30px;
        }

        .stat-card {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            padding: 20px;
            border-radius: 8px;
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.1);
        }

        .stat-card h3 {
            font-size: 12px;
            opacity: 0.9;
            margin-bottom: 10px;
            text-transform: uppercase;
            letter-spacing: 1px;
        }

        .stat-card .value {
            font-size: 32px;
            font-weight: bold;
        }

        .stat-card .unit {
            font-size: 14px;
            opacity: 0.8;
            margin-top: 5px;
        }

        .acwr-indicator {
            display: flex;
            align-items: center;
            gap: 10px;
            margin: 15px 0;
            padding: 15px;
            background: #f0f0f0;
            border-radius: 6px;
        }

        .acwr-bar {
            flex: 1;
            height: 30px;
            background: linear-gradient(90deg, #e74c3c 0%, #f39c12 50%, #27ae60 100%);
            border-radius: 15px;
            position: relative;
            overflow: hidden;
        }

        .acwr-marker {
            position: absolute;
            top: 0;
            height: 100%;
            width: 3px;
            background: black;
            display: flex;
            align-items: center;
            justify-content: center;
        }

        .warning-box {
            background: #fff3cd;
            border-left: 4px solid #f39c12;
            padding: 15px;
            border-radius: 4px;
            margin: 20px 0;
            font-size: 14px;
            color: #856404;
        }

        .success-box {
            background: #d4edda;
            border-left: 4px solid #27ae60;
            padding: 15px;
            border-radius: 4px;
            margin: 20px 0;
            font-size: 14px;
            color: #155724;
        }

        .section-title {
            font-size: 18px;
            font-weight: 700;
            color: #333;
            margin: 30px 0 20px 0;
            padding-bottom: 10px;
            border-bottom: 2px solid #667eea;
        }

        .note {
            font-size: 12px;
            color: #666;
            font-style: italic;
            margin-top: 10px;
        }

        .export-btn {
            background: #27ae60;
            margin-left: 10px;
        }

        .export-btn:hover {
            background: #229954;
        }

        @media (max-width: 768px) {
            .form-grid {
                grid-template-columns: 1fr;
            }

            .stats-grid {
                grid-template-columns: 1fr;
            }

            .header h1 {
                font-size: 20px;
            }

            .tabs {
                overflow-x: auto;
            }

            .tab-btn {
                white-space: nowrap;
                flex: 0 0 auto;
                padding: 12px 15px;
            }
        }
    </style>
</head>
<body>
    <div class="container">
        <div class="header">
            <h1>ğŸƒ è·‘æ­¥æ— ä¼¤ç›‘æ§ç³»ç»Ÿ</h1>
            <p>Running Injury Prevention Monitoring Dashboard | ç›®æ ‡ï¼šæ— ä¼¤å®Œæˆ10Kè®­ç»ƒ</p>
        </div>

        <div class="tabs">
            <button class="tab-btn active" onclick="switchTab('daily')">ğŸ“… æ¯æ—¥è®°å½•</button>
            <button class="tab-btn" onclick="switchTab('weekly')">ğŸ“Š å‘¨æ±‡æ€»</button>
            <button class="tab-btn" onclick="switchTab('analytics')">ğŸ“ˆ åˆ†æä»ªè¡¨æ¿</button>
            <button class="tab-btn" onclick="switchTab('guide')">ğŸ“– ä½¿ç”¨æŒ‡å—</button>
        </div>

        <!-- æ¯æ—¥è®°å½•æ ‡ç­¾ -->
        <div id="daily" class="tab-content active">
            <h2 class="section-title">æ¯æ—¥è®­ç»ƒä¸æ¢å¤è®°å½•</h2>
            
            <div class="form-grid">
                <div class="form-group">
                    <label>æ—¥æœŸ</label>
                    <input type="date" id="date" value="">
                </div>
                <div class="form-group">
                    <label>è®­ç»ƒç±»å‹ *</label>
                    <select id="trainingType">
                        <option value="">é€‰æ‹©è®­ç»ƒç±»å‹</option>
                        <option value="easy">è½»æ¾è·‘ (Easy - å¯è½»æ¾äº¤è°ˆ)</option>
                        <option value="interval">é—´æ­‡è®­ç»ƒ (Interval - äº¤æ›¿å¿«æ…¢)</option>
                        <option value="long">é•¿è·ç¦»è·‘ (Long Run)</option>
                        <option value="base">åŸºç¡€è·‘ (Base Run - ä¸­ç­‰é…é€Ÿ)</option>
                    </select>
                    <div class="note">ğŸ’¡ ä¼‘æ¯æ—¥æ— éœ€è®°å½•</div>
                </div>
                <div class="form-group">
                    <label>è·ç¦» (km)</label>
                    <input type="number" id="distance" step="0.1" placeholder="0.0">
                </div>
                <div class="form-group">
                    <label>æ—¶é—´ (åˆ†é’Ÿ)</label>
                    <input type="number" id="duration" placeholder="0">
                </div>
                <div class="form-group">
                    <label>å¹³å‡é…é€Ÿ (åˆ†:ç§’/km) *</label>
                    <input type="text" id="pace" placeholder="6:30">
                    <div class="note">æ ¼å¼ç¤ºä¾‹: 6:30 æˆ– 7:15</div>
                </div>
                <div class="form-group">
                    <label>RPE è‡ªè§‰ç”¨åŠ›ç¨‹åº¦ (1-10) *</label>
                    <input type="number" id="rpe" min="1" max="10">
                    <div class="note">1-3è½»æ¾ | 4-6ä¸­ç­‰ | 7-8å›°éš¾ | 9-10æœ€å¤§</div>
                </div>
                <div class="form-group">
                    <label>é™æ¯å¿ƒç‡ (æ—©æ™¨) (bpm)</label>
                    <input type="number" id="restingHR" placeholder="60">
                    <div class="note">æ—©æ™¨èµ·åºŠååä¸‹ä¼‘æ¯2-3åˆ†é’Ÿæµ‹é‡</div>
                </div>
                <div class="form-group">
                    <label>HRV (æ—©æ™¨) (å¯é€‰)</label>
                    <input type="number" id="hrv" placeholder="å¯é€‰">
                    <div class="note">å¿ƒç‡å˜å¼‚æ€§ï¼ŒåŒæ—©æ™¨æ—¶é—´æµ‹é‡</div>
                </div>
                <div class="form-group">
                    <label>ä½“é‡ (kg)</label>
                    <input type="number" id="weight" step="0.1">
                    <div class="note">å»ºè®®æ¯å‘¨åŒä¸€æ—¶é—´æµ‹é‡ï¼Œå¦‚å‘¨ä¸€æ—©æ™¨</div>
                </div>
                <div class="form-group">
                    <label>ç¡çœ æ—¶é•¿ (å°æ—¶)</label>
                    <input type="number" id="sleep" step="0.5" min="0">
                    <div class="note">ç›®æ ‡: 7-9å°æ—¶å¯¹æ¢å¤æœ€ä¼˜</div>
                </div>
                <div class="form-group">
                    <label>ç–²åŠ³ç¨‹åº¦ (1-10)</label>
                    <input type="number" id="fatigue" min="1" max="10">
                    <div class="note">1å®Œå…¨æ¢å¤ | 10æåº¦ç–²åŠ³</div>
                </div>
                <div class="form-group">
                    <label>èº«ä½“ä¸é€‚è®°å½•</label>
                    <textarea id="injury" placeholder="ä½ç½®ã€ç¨‹åº¦ (1-10)ã€æ—¶é—´ç­‰"></textarea>
                </div>
            </div>

            <button onclick="addDailyRecord()">ğŸ’¾ ä¿å­˜æ¯æ—¥è®°å½•</button>

            <div class="table-container">
                <table id="dailyTable">
                    <thead>
                        <tr>
                            <th>æ—¥æœŸ</th>
                            <th>ç±»å‹</th>
                            <th>è·ç¦»(km)</th>
                            <th>æ—¶é—´(åˆ†)</th>
                            <th>é…é€Ÿ</th>
                            <th>RPE</th>
                            <th>é™æ¯HR</th>
                            <th>ä½“é‡</th>
                            <th>ç¡çœ </th>
                            <th>ç–²åŠ³</th>
                            <th>ä¼¤ç—…</th>
                            <th>æ“ä½œ</th>
                        </tr>
                    </thead>
                    <tbody id="dailyTableBody">
                    </tbody>
                </table>
            </div>
        </div>

        <!-- å‘¨æ±‡æ€»æ ‡ç­¾ -->
        <div id="weekly" class="tab-content">
            <h2 class="section-title">å‘¨è®­ç»ƒè´Ÿè·æ±‡æ€»ä¸ACWRè®¡ç®—</h2>

            <div class="stats-grid">
                <div class="stat-card">
                    <h3>æœ¬å‘¨æ€»é‡Œç¨‹</h3>
                    <div class="value" id="weeklyDistance">0</div>
                    <div class="unit">km</div>
                </div>
                <div class="stat-card">
                    <h3>æœ¬å‘¨æ€»è®­ç»ƒè´Ÿè·</h3>
                    <div class="value" id="weeklyLoad">0</div>
                    <div class="unit">è®­ç»ƒå•ä½</div>
                </div>
                <div class="stat-card">
                    <h3>å¹³å‡é…é€Ÿ</h3>
                    <div class="value" id="avgPace">--</div>
                    <div class="unit">åˆ†/km</div>
                </div>
                <div class="stat-card">
                    <h3>å¹³å‡RPE</h3>
                    <div class="value" id="avgRPE">0</div>
                    <div class="unit">/10</div>
                </div>
            </div>

            <h3 class="section-title" style="margin-top: 40px;">ACWR (æ€¥æ€§-æ…¢æ€§å·¥ä½œé‡æ¯”)</h3>

            <div class="form-grid">
                <div class="form-group">
                    <label>é€‰æ‹©å‘¨æ•° (Week)</label>
                    <select id="acwrWeek" onchange="calculateACWR()">
                        <option value="">é€‰æ‹©å‘¨æ•°æŸ¥çœ‹ACWR</option>
                    </select>
                </div>
            </div>

            <div id="acwrResult" style="display: none;">
                <div class="acwr-indicator">
                    <div style="min-width: 150px;">
                        <strong>ACWR å€¼:</strong> <span id="acwrValue" style="font-size: 20px; color: #667eea;">0.00</span>
                    </div>
                    <div class="acwr-bar" style="width: 100%;">
                        <div class="acwr-marker" id="acwrMarker"></div>
                    </div>
                </div>

                <div id="acwrStatus"></div>

                <div class="note" style="margin-top: 15px;">
                    <strong>ACWR è§£è¯»:</strong>
                    <br>â€¢ 0.8-1.3: âœ… å®‰å…¨èŒƒå›´ (Sweet Spot) - è®­ç»ƒå¹³è¡¡
                    <br>â€¢ < 0.8: âš ï¸ è¿‡åº¦æ¢å¤æˆ–è®­ç»ƒä¸è¶³
                    <br>â€¢ > 1.5: ğŸ”´ é«˜é£é™©åŒºé—´ - æŸä¼¤é£é™©å¢åŠ 
                    <br>
                    <br><strong>è®¡ç®—æ–¹æ³•:</strong> æœ¬å‘¨è´Ÿè· Ã· è¿‡å»4å‘¨å¹³å‡è´Ÿè·
                </div>
            </div>

            <h3 class="section-title">å‘¨æ•°æ®å¯¹æ¯”</h3>
            <div class="table-container">
                <table id="weeklyTable">
                    <thead>
                        <tr>
                            <th>å‘¨æ•°</th>
                            <th>æ—¥æœŸèŒƒå›´</th>
                            <th>æ€»é‡Œç¨‹(km)</th>
                            <th>è®­ç»ƒè´Ÿè·</th>
                            <th>å¹³å‡RPE</th>
                            <th>ACWR</th>
                            <th>æŸä¼¤äº‹ä»¶</th>
                        </tr>
                    </thead>
                    <tbody id="weeklyTableBody">
                    </tbody>
                </table>
            </div>
        </div>

        <!-- åˆ†æä»ªè¡¨æ¿ -->
        <div id="analytics" class="tab-content">
            <h2 class="section-title">æ•°æ®å¯è§†åŒ–ä¸è¶‹åŠ¿åˆ†æ</h2>

            <div class="stats-grid">
                <div class="stat-card">
                    <h3>æ€»è®­ç»ƒå‘¨æœŸ</h3>
                    <div class="value" id="totalWeeks">13</div>
                    <div class="unit">å‘¨</div>
                </div>
                <div class="stat-card">
                    <h3>å®Œæˆçš„è®­ç»ƒæ—¥</h3>
                    <div class="value" id="trainingDays">0</div>
                    <div class="unit">å¤©</div>
                </div>
                <div class="stat-card">
                    <h3>æ€»é‡Œç¨‹</h3>
                    <div class="value" id="totalDistance">0</div>
                    <div class="unit">km</div>
                </div>
                <div class="stat-card">
                    <h3>è®°å½•çš„ä¼¤ç—…äº‹ä»¶</h3>
                    <div class="value" id="injuryEvents">0</div>
                    <div class="unit">æ¬¡</div>
                </div>
            </div>

            <h3 class="section-title">å‘¨é‡Œç¨‹è¶‹åŠ¿</h3>
            <div class="chart-container">
                <canvas id="distanceChart"></canvas>
            </div>

            <h3 class="section-title">ä½“é‡å˜åŒ–</h3>
            <div class="chart-container">
                <canvas id="weightChart"></canvas>
            </div>

            <h3 class="section-title">å‘¨è®­ç»ƒè´Ÿè· vs ACWR</h3>
            <div class="chart-container">
                <canvas id="acwrChart"></canvas>
            </div>

            <h3 class="section-title">å¹³å‡RPEä¸ç¡çœ è´¨é‡</h3>
            <div class="chart-container">
                <canvas id="rpeChart"></canvas>
            </div>

            <h3 class="section-title">ä¼¤ç—…è®°å½•æ—¶é—´çº¿</h3>
            <div id="injuryTimeline" style="margin-top: 20px;">
                <div class="note">æš‚æ— ä¼¤ç—…è®°å½•</div>
            </div>
        </div>

        <!-- ä½¿ç”¨æŒ‡å— -->
        <div id="guide" class="tab-content">
            <h2 class="section-title">ğŸ“– ä½¿ç”¨æŒ‡å—ä¸ç§‘å­¦è¯æ®</h2>

            <h3 style="margin-top: 30px; font-size: 16px;">ğŸ¯ ç›‘æ§æŒ‡æ ‡è¯´æ˜</h3>
            <h3 style="margin-top: 30px; font-size: 16px;">ğŸ¯ ç›‘æ§æŒ‡æ ‡è¯´æ˜ä¸è®°å½•é¢‘ç‡</h3>
            <div class="success-box">
                <strong>è®­ç»ƒåç«‹å³è®°å½• (æ¯æ¬¡è®­ç»ƒå)</strong>
                <br>â€¢ æ—¥æœŸã€è®­ç»ƒç±»å‹ã€è·ç¦»(km)ã€æ—¶é—´ã€é…é€Ÿ(åˆ†:ç§’/km)
                <br>â€¢ RPE (1-10)ã€ä»»ä½•èº«ä½“ä¸é€‚æˆ–ä¼¤ç—…
            </div>

            <div class="success-box">
                <strong>æ—©æ™¨è®°å½• (æ¯å¤©æ—©èµ·åï¼Œæ— è®ºæ˜¯å¦è®­ç»ƒ)</strong>
                <br>â€¢ é™æ¯å¿ƒç‡ï¼šåä¸‹ä¼‘æ¯2-3åˆ†é’Ÿåæµ‹ï¼ˆä»£è¡¨æ¢å¤çŠ¶æ€ï¼‰
                <br>â€¢ HRVï¼šç”¨è·‘è¡¨æˆ–æ‰‹ç¯è‡ªåŠ¨æµ‹ï¼ˆå¯é€‰ï¼Œä½†æœ‰ä»·å€¼ï¼‰
                <br>â€¢ ç¡çœ æ—¶é•¿ï¼šå‰ä¸€æ™šç¡çœ å°æ—¶æ•°
                <br>â€¢ ä½“é‡ï¼šå»ºè®®æ¯å‘¨åŒä¸€æ—¶é—´æµ‹ï¼ˆå¦‚å‘¨ä¸€æ—©æ™¨ï¼‰
                <br>â€¢ ç–²åŠ³ç¨‹åº¦ï¼šä¸»è§‚1-10è¯„åˆ†
            </div>

            <div class="success-box">
                <strong>ç¬¬ä¸€å±‚ï¼šæ ¸å¿ƒè®­ç»ƒè´Ÿè·æŒ‡æ ‡ (å¿…é¡»)</strong>
                <br>â€¢ æ¯å‘¨é‡Œç¨‹ï¼šè‡ªåŠ¨ç´¯åŠ 
                <br>â€¢ ACWR (0.8-1.3ä¸ºå®‰å…¨èŒƒå›´)ï¼šæ¯å‘¨æ—¥æŸ¥çœ‹
                <br>â€¢ å‘¨è®­ç»ƒé¢‘ç‡ï¼šè‡ªåŠ¨è®¡ç®—
            </div>

            <div class="success-box">
                <strong>ç¬¬äºŒå±‚ï¼šç”Ÿç†æ¢å¤æŒ‡æ ‡ (å¼ºçƒˆæ¨è - æ—©æ™¨æ•°æ®)</strong>
                <br>â€¢ HRV (å¿ƒç‡å˜å¼‚æ€§)ï¼šä½å€¼è¡¨ç¤ºæ¢å¤ä¸è¶³
                <br>â€¢ é™æ¯å¿ƒç‡ï¼šå‡é«˜5-10 bpmè¡¨ç¤ºæ¢å¤ä¸è¶³
                <br>â€¢ ç¡çœ è´¨é‡å’Œæ—¶é•¿ï¼š7-9å°æ—¶æœ€ä¼˜
                <br>â€¢ RPE (è‡ªè§‰ç”¨åŠ›ç¨‹åº¦)ï¼šæ¥è‡ªè®­ç»ƒè®°å½•ï¼Œè‡ªåŠ¨è®¡ç®—å¹³å‡å€¼
            </div>

            <div class="success-box">
                <strong>ç¬¬ä¸‰å±‚ï¼šä½ çš„ç‰¹å®šç ”ç©¶æŒ‡æ ‡</strong>
                <br>â€¢ ä½“é‡ï¼šæ¯å‘¨åŒä¸€æ—¶é—´æµ‹é‡ï¼Œè¿½è¸ªè¶‹åŠ¿
                <br>â€¢ ä½“è„‚ç‡ï¼šå¯é€‰ï¼Œä½†æœ‰ä»·å€¼
            </div>

            <div class="success-box">
                <strong>ç¬¬å››å±‚ï¼šä¼¤ç—…ç›‘æ§</strong>
                <br>â€¢ ä¼¤ç—…æ—¥å¿—ï¼šä½ç½®ã€ä¸¥é‡ç¨‹åº¦(1-10)ã€è§¦å‘å› ç´ 
                <br>â€¢ åŠŸèƒ½æ€§è¡¨ç°ï¼šè·‘æ­¥ç»æµæ€§ã€æœ€å¤§å¿ƒç‡ç»´æŒèƒ½åŠ›
            </div>

            <h3 style="margin-top: 30px; font-size: 16px;">âš¡ é…é€Ÿæ”¹å–„é¢„æœŸ</h3>
            <div class="warning-box">
                <strong>çŸ­æœŸé¢„æœŸ (å½“å‰åˆ°ç¬¬8å‘¨):</strong>
                <br>â€¢ ç¬¬1-2å‘¨: 0-1% æ”¹å–„ (ç¥ç»ç³»ç»Ÿé€‚åº”)
                <br>â€¢ ç¬¬3-6å‘¨: 1-3% æ”¹å–„ (æ—©æœŸå¿ƒè¡€ç®¡é€‚åº”)
                <br>â€¢ ç¬¬7-10å‘¨: 2-4% æ”¹å–„ (çº¿ç²’ä½“æ”¹å–„)
                <br>â€¢ æ€»ä½“: ç°å®é¢„æœŸæ˜¯ 3-8% çš„é…é€Ÿæ”¹å–„
                <br><br><strong>ä¾‹å¦‚:</strong> å¦‚æœç°åœ¨æ˜¯6:30/kmï¼Œ8å‘¨åé¢„æœŸæ˜¯6:18-6:21/km
            </div>

            <h3 style="margin-top: 30px; font-size: 16px;">â“ å¸¸è§é—®é¢˜è§£ç­”</h3>
            
            <div class="warning-box">
                <strong>Q: RPE æ˜¯ä»€ä¹ˆæ„æ€ï¼Ÿ</strong>
                <br>A: RPE = Rate of Perceived Exertion (è‡ªè§‰ç”¨åŠ›ç¨‹åº¦)ï¼Œæ˜¯ä½ ä¸»è§‚æ„Ÿå—çš„ç–²æƒ«ç¨‹åº¦
                <br>â€¢ 1-3: éå¸¸è½»æ¾ï¼ˆå¯ä»¥è½»æ¾äº¤è°ˆï¼‰
                <br>â€¢ 4-6: ä¸­ç­‰å¼ºåº¦ï¼ˆå¯ä»¥è¯´å‡ ä¸ªè¯ï¼‰
                <br>â€¢ 7-8: å›°éš¾ï¼ˆåªèƒ½è¯´å°‘æ•°è¯ï¼‰
                <br>â€¢ 9-10: æœ€å¤§åŠªåŠ›ï¼ˆæ— æ³•è¯´è¯ï¼‰
            </div>

            <div class="warning-box">
                <strong>Q: é™æ¯å¿ƒç‡ (HR) ä»€ä¹ˆæ—¶å€™æµ‹ï¼Ÿ</strong>
                <br>A: æ—©æ™¨åˆšèµ·åºŠåï¼åä¸‹ä¼‘æ¯2-3åˆ†é’Ÿåæµ‹é‡
                <br>â€¢ ä»£è¡¨ä½ å®Œå…¨æ”¾æ¾å’Œæ¢å¤çš„çŠ¶æ€
                <br>â€¢ åŒä¸€æ—¶é—´æµ‹é‡æœ€å‡†ç¡®
                <br>â€¢ å‡é«˜5-10 bpmå¯èƒ½è¡¨ç¤ºæ¢å¤ä¸è¶³æˆ–è¿‡åº¦è®­ç»ƒ
            </div>

            <div class="warning-box">
                <strong>Q: HRV ä»€ä¹ˆæ—¶å€™æµ‹ï¼Ÿæ€ä¹ˆæµ‹ï¼Ÿ</strong>
                <br>A: åŒæ ·æ˜¯æ—©æ™¨èµ·åºŠåä¸é™æ¯å¿ƒç‡ä¸€èµ·æµ‹
                <br>â€¢ HRV = Heart Rate Variability (å¿ƒç‡å˜å¼‚æ€§)
                <br>â€¢ åæ˜ ä½ çš„è‡ªä¸»ç¥ç»ç³»ç»Ÿæ¢å¤çŠ¶æ€
                <br>â€¢ ç”¨è®¸å¤šè·‘æ­¥æ‰‹è¡¨æˆ–å¥èº«æ‰‹ç¯å¯ä»¥è‡ªåŠ¨æµ‹é‡
                <br>â€¢ ä½HRVè¡¨ç¤ºæ¢å¤ä¸è¶³ã€å‹åŠ›å¤§æˆ–ç”Ÿç—…
            </div>

            <div class="warning-box">
                <strong>Q: è®­ç»ƒç±»å‹æ€ä¹ˆé€‰ï¼Ÿ</strong>
                <br>A: æ ¹æ®ä½ çš„è®¡åˆ’å’Œæ„Ÿè§‰é€‰æ‹©ï¼š
                <br>â€¢ è½»æ¾è·‘: å¤§å¤šæ•°æ—¥å­ï¼Œå¯ä»¥è½»æ¾äº¤è°ˆ (RPE 3-4)
                <br>â€¢ åŸºç¡€è·‘: ä¸­ç­‰é…é€Ÿï¼Œæ¯”è½»æ¾è·‘å¿«ä¸€ç‚¹ (RPE 5-6)
                <br>â€¢ é•¿è·ç¦»è·‘: å‘¨æœ«çš„é•¿è·‘ (RPE 4-5)
                <br>â€¢ é—´æ­‡è®­ç»ƒ: äº¤æ›¿å¿«æ…¢ï¼Œæœ€é«˜å¼ºåº¦ (RPE 8-9)
                <br>â€¢ ä¸éœ€è¦è®°å½•ä¼‘æ¯æ—¥
            </div>

            <div class="success-box">
                <strong>ğŸ’¡ ç®€åŒ–çš„å®é™…åšæ³•:</strong>
                <br>â€¢ æ¯æ¬¡è®­ç»ƒè®°å½•: æ—¥æœŸã€è®­ç»ƒç±»å‹ã€è·ç¦»ã€é…é€Ÿã€RPEã€ä¼¤ç—…
                <br>â€¢ æ¯ä¸ªæ—©æ™¨è®°å½•: æ—©æ™¨HRã€HRVã€ç¡çœ ã€ä½“é‡ã€ç–²åŠ³ç¨‹åº¦
                <br>â€¢ è¿™æ ·å¯ä»¥æ¸…æ¥šçœ‹åˆ°è®­ç»ƒä¸æ¢å¤çš„å…³ç³»
            </div>
            <div class="warning-box">
                <strong>å…³é”®å‘ç°:</strong>
                <br>â€¢ éª¨éª¼å’Œè‚Œè…±éœ€è¦4ä¸ªæœˆæ‰èƒ½é€‚åº”æ–°é€Ÿåº¦
                <br>â€¢ æœ‰æ°§ç³»ç»Ÿåœ¨6-8å‘¨å†…æ”¹å–„ï¼Œä½†ç»“æ„æ€§é€‚åº”æ»å
                <br>â€¢ æ¯å‘¨é‡Œç¨‹å¢åŠ ä¸è¶…è¿‡10%ï¼ŒæŸä¼¤é£é™©æ˜¾è‘—é™ä½
                <br>â€¢ å‘¨é‡Œç¨‹å¢åŠ è¶…è¿‡15%ï¼ŒæŸä¼¤é£é™©å¢åŠ 21-49%
            </div>

            <h3 style="margin-top: 30px; font-size: 16px;">ğŸ’¡ ä½¿ç”¨å»ºè®®</h3>
            <ol style="margin-left: 20px; line-height: 1.8;">
                <li><strong>æ¯æ—¥è®°å½•:</strong> åœ¨è®­ç»ƒåç«‹å³è®°å½•æ•°æ®ï¼Œç¡®ä¿å‡†ç¡®æ€§</li>
                <li><strong>å‘¨æ±‡æ€»:</strong> æ¯å‘¨æ—¥è‡ªåŠ¨è®¡ç®—æœ¬å‘¨ç»Ÿè®¡å’ŒACWR</li>
                <li><strong>ACWRç›‘æ§:</strong> ä¿æŒåœ¨0.8-1.3èŒƒå›´å†…ï¼Œé˜²æ­¢è¿‡åº¦è®­ç»ƒ</li>
                <li><strong>ä¼¤ç—…è·Ÿè¸ª:</strong> ä»»ä½•ä¸é€‚éƒ½è¦è®°å½•ï¼Œå³ä½¿å¾ˆè½»å¾®</li>
                <li><strong>å®šæœŸè¯„ä¼°:</strong> æ¯4å‘¨è¯„ä¼°ä¸€æ¬¡é…é€Ÿæ˜¯å¦å¯ä»¥è°ƒæ•´ç›®æ ‡</li>
                <li><strong>ç”Ÿæ´»æ–¹å¼:</strong> ç¡çœ å’Œè¥å…»ä¸è®­ç»ƒåŒæ ·é‡è¦</li>
            </ol>

            <h3 style="margin-top: 30px; font-size: 16px;">ğŸ“¥ æ•°æ®ç®¡ç†</h3>
            <div style="margin-top: 15px;">
                <button class="export-btn" onclick="exportData()">ğŸ“¥ å¯¼å‡ºæ‰€æœ‰æ•°æ® (JSON)</button>
                <button class="export-btn" onclick="importData()" style="background: #3498db;">ğŸ“¤ å¯¼å…¥æ•°æ®</button>
                <input type="file" id="importFile" style="display: none;" accept=".json" onchange="handleImport(event)">
            </div>

            <div class="note" style="margin-top: 30px; padding: 15px; background: #f0f0f0; border-radius: 6px;">
                <strong>ç§‘å­¦è¯æ®ç­‰çº§è¯´æ˜:</strong>
                <br>â€¢ ACWR + å‘¨é‡Œç¨‹å˜åŒ–: é«˜çº§åˆ«è¯æ® (å¤šé¡¹RCTå’Œç³»ç»Ÿç»¼è¿°)
                <br>â€¢ HRV + ç¡çœ : ä¸­-é«˜çº§è¯æ® (å¹¿æ³›ç”¨äºç²¾è‹±è¿åŠ¨å‘˜)
                <br>â€¢ RPE + è‡ªä¸»ç›‘æ§: ä¸­çº§è¯æ® (å®ç”¨æ€§å¼ºï¼Œç§‘å­¦æ”¯æ’‘å……åˆ†)
                <br>â€¢ ä½“é‡ä¸ä¼¤ç—…å…³ç³»: ä¸­çº§è¯æ® (ç›¸å…³æ€§æ˜ç¡®ï¼Œéœ€ç»“åˆå…¶ä»–å› ç´ )
            </div>
        </div>
    </div>

    <script>
        // åˆå§‹åŒ–
        const today = new Date().toISOString().split('T')[0];
        document.getElementById('date').value = today;

        // æ•°æ®å­˜å‚¨
        const getStorageKey = () => 'running_monitoring_data_' + new Date().getFullYear();
        
        function loadData() {
            const key = getStorageKey();
            const stored = localStorage.getItem(key);
            return stored ? JSON.parse(stored) : [];
        }

        function saveData(data) {
            const key = getStorageKey();
            localStorage.setItem(key, JSON.stringify(data));
        }

        // æ ‡ç­¾åˆ‡æ¢
        function switchTab(tabName) {
            document.querySelectorAll('.tab-content').forEach(tab => tab.classList.remove('active'));
            document.querySelectorAll('.tab-btn').forEach(btn => btn.classList.remove('active'));
            
            document.getElementById(tabName).classList.add('active');
            event.target.classList.add('active');

            if (tabName === 'weekly') {
                updateWeeklySummary();
            } else if (tabName === 'analytics') {
                updateAnalytics();
            }
        }

        // æ·»åŠ æ¯æ—¥è®°å½•
        function addDailyRecord() {
            const record = {
                date: document.getElementById('date').value,
                trainingType: document.getElementById('trainingType').value,
                distance: parseFloat(document.getElementById('distance').value) || 0,
                duration: parseInt(document.getElementById('duration').value) || 0,
                pace: document.getElementById('pace').value,
                rpe: parseInt(document.getElementById('rpe').value) || 0,
                restingHR: parseInt(document.getElementById('restingHR').value) || 0,
                hrv: parseInt(document.getElementById('hrv').value) || 0,
                weight: parseFloat(document.getElementById('weight').value) || 0,
                sleep: parseFloat(document.getElementById('sleep').value) || 0,
                fatigue: parseInt(document.getElementById('fatigue').value) || 0,
                injury: document.getElementById('injury').value,
                timestamp: new Date().toISOString()
            };

            if (!record.date) {
                alert('è¯·é€‰æ‹©æ—¥æœŸ');
                return;
            }

            let data = loadData();
            // åˆ é™¤åŒä¸€å¤©çš„æ—§è®°å½•
            data = data.filter(r => r.date !== record.date);
            data.push(record);
            data.sort((a, b) => new Date(a.date) - new Date(b.date));
            saveData(data);

            clearForm();
            displayDailyRecords();
            alert('âœ… è®°å½•å·²ä¿å­˜');
        }

        function clearForm() {
            document.getElementById('date').value = today;
            document.getElementById('trainingType').value = '';
            document.getElementById('distance').value = '';
            document.getElementById('duration').value = '';
            document.getElementById('pace').value = '';
            document.getElementById('rpe').value = '';
            document.getElementById('restingHR').value = '';
            document.getElementById('hrv').value = '';
            document.getElementById('weight').value = '';
            document.getElementById('sleep').value = '';
            document.getElementById('fatigue').value = '';
            document.getElementById('injury').value = '';
        }

        function displayDailyRecords() {
            const data = loadData();
            const tbody = document.getElementById('dailyTableBody');
            tbody.innerHTML = '';

            data.forEach((record, index) => {
                const row = tbody.insertRow();
                row.innerHTML = `
                    <td>${record.date}</td>
                    <td>${record.trainingType}</td>
                    <td>${record.distance}</td>
                    <td>${record.duration}</td>
                    <td>${record.pace}</td>
                    <td>${record.rpe}</td>
                    <td>${record.restingHR}</td>
                    <td>${record.weight}</td>
                    <td>${record.sleep}</td>
                    <td>${record.fatigue}</td>
                    <td style="max-width: 150px; word-break: break-word;">${record.injury || '-'}</td>
                    <td><button class="delete-btn" onclick="deleteRecord(${index})">åˆ é™¤</button></td>
                `;
            });
        }

        function deleteRecord(index) {
            if (!confirm('ç¡®å®šåˆ é™¤æ­¤è®°å½•å—?')) return;
            let data = loadData();
            data.splice(index, 1);
            saveData(data);
            displayDailyRecords();
        }

        // å‘¨æ±‡æ€»
        function getWeekData(weekNumber) {
            const data = loadData();
            const currentYear = new Date().getFullYear();
            const weekRecords = data.filter(r => {
                const date = new Date(r.date);
                const week = getWeekNumber(date);
                const year = date.getFullYear();
                return week === weekNumber && year === currentYear;
            });
            return weekRecords;
        }

        function getWeekNumber(date) {
            const d = new Date(Date.UTC(date.getFullYear(), date.getMonth(), date.getDate()));
            const dayNum = d.getUTCDay() || 7;
            d.setUTCDate(d.getUTCDate() + 4 - dayNum);
            const yearStart = new Date(Date.UTC(d.getUTCFullYear(), 0, 1));
            return Math.ceil((((d - yearStart) / 86400000) + 1) / 7);
        }

        function updateWeeklySummary() {
            const data = loadData();
            if (data.length === 0) {
                alert('æš‚æ— æ•°æ®');
                return;
            }

            const currentWeek = getWeekNumber(new Date());
            const weekData = getWeekData(currentWeek);

            if (weekData.length === 0) {
                alert('æœ¬å‘¨æš‚æ— æ•°æ®');
                return;
            }

            const totalDistance = weekData.reduce((sum, r) => sum + r.distance, 0);
            const totalLoad = weekData.reduce((sum, r) => sum + (r.distance * r.rpe), 0);
            const avgRPE = weekData.length > 0 ? (weekData.reduce((sum, r) => sum + r.rpe, 0) / weekData.length).toFixed(1) : 0;

            document.getElementById('weeklyDistance').textContent = totalDistance.toFixed(1);
            document.getElementById('weeklyLoad').textContent = totalLoad.toFixed(0);
            document.getElementById('avgRPE').textContent = avgRPE;

            // è®¡ç®—å¹³å‡é…é€Ÿ
            const avgPaceSeconds = weekData.reduce((sum, r) => {
                const parts = r.pace.split(':');
                return sum + (parseInt(parts[0]) * 60 + parseInt(parts[1]));
            }, 0) / weekData.length;
            const avgPaceMin = Math.floor(avgPaceSeconds / 60);
            const avgPaceSec = Math.floor(avgPaceSeconds % 60);
            document.getElementById('avgPace').textContent = `${avgPaceMin}:${String(avgPaceSec).padStart(2, '0')}`;

            // æ›´æ–°ACWRå‘¨é€‰æ‹©å™¨
            const weekSelect = document.getElementById('acwrWeek');
            const weeks = new Set(data.map(r => getWeekNumber(new Date(r.date))));
            weekSelect.innerHTML = '<option value="">é€‰æ‹©å‘¨æ•°æŸ¥çœ‹ACWR</option>';
            Array.from(weeks).sort().reverse().forEach(week => {
                weekSelect.innerHTML += `<option value="${week}">ç¬¬ ${week} å‘¨</option>`;
            });

            // æ˜¾ç¤ºå‘¨æ±‡æ€»è¡¨æ ¼
            displayWeeklyTable();
        }

        function displayWeeklyTable() {
            const data = loadData();
            const weeks = new Set(data.map(r => getWeekNumber(new Date(r.date))));
            const tbody = document.getElementById('weeklyTableBody');
            tbody.innerHTML = '';

            Array.from(weeks).sort().forEach(week => {
                const weekData = getWeekData(week);
                const totalDistance = weekData.reduce((sum, r) => sum + r.distance, 0);
                const totalLoad = weekData.reduce((sum, r) => sum + (r.distance * r.rpe), 0);
                const avgRPE = (weekData.reduce((sum, r) => sum + r.rpe, 0) / weekData.length).toFixed(1);
                const injuries = weekData.filter(r => r.injury).length;

                const startDate = new Date();
                startDate.setDate(startDate.getDate() - startDate.getDay() + 1 + (week - getWeekNumber(new Date())) * 7);
                const endDate = new Date(startDate);
                endDate.setDate(endDate.getDate() + 6);

                const acwr = calculateWeeklyACWR(week);

                const row = tbody.insertRow();
                row.innerHTML = `
                    <td>ç¬¬ ${week} å‘¨</td>
                    <td>${startDate.toLocaleDateString('zh-CN')} - ${endDate.toLocaleDateString('zh-CN')}</td>
                    <td>${totalDistance.toFixed(1)}</td>
                    <td>${totalLoad.toFixed(0)}</td>
                    <td>${avgRPE}</td>
                    <td class="${acwr < 0.8 ? 'status-warning' : acwr > 1.5 ? 'status-danger' : 'status-safe'}">
                        ${acwr.toFixed(2)}
                    </td>
                    <td>${injuries}</td>
                `;
            });
        }

        function calculateWeeklyACWR(week) {
            const data = loadData();
            const weekData = getWeekData(week);
            const acuteLoad = weekData.reduce((sum, r) => sum + (r.distance * r.rpe), 0);

            // è®¡ç®—è¿‡å»4å‘¨çš„å¹³å‡è´Ÿè·
            let chronicLoad = 0;
            for (let i = 1; i <= 4; i++) {
                const prevWeekData = getWeekData(week - i);
                const prevLoad = prevWeekData.reduce((sum, r) => sum + (r.distance * r.rpe), 0);
                chronicLoad += prevLoad;
            }
            chronicLoad = chronicLoad / 4;

            return chronicLoad > 0 ? acuteLoad / chronicLoad : 0;
        }

        function calculateACWR() {
            const week = parseInt(document.getElementById('acwrWeek').value);
            if (!week) {
                document.getElementById('acwrResult').style.display = 'none';
                return;
            }

            const data = loadData();
            const weekData = getWeekData(week);
            const acuteLoad = weekData.reduce((sum, r) => sum + (r.distance * r.rpe), 0);

            let chronicLoad = 0;
            for (let i = 1; i <= 4; i++) {
                const prevWeekData = getWeekData(week - i);
                const prevLoad = prevWeekData.reduce((sum, r) => sum + (r.distance * r.rpe), 0);
                chronicLoad += prevLoad;
            }
            chronicLoad = chronicLoad / 4;

            const acwr = chronicLoad > 0 ? acuteLoad / chronicLoad : 0;

            document.getElementById('acwrValue').textContent = acwr.toFixed(2);
            
            const marker = document.getElementById('acwrMarker');
            let percentage = (acwr / 2) * 100;
            if (percentage > 100) percentage = 100;
            marker.style.left = Math.max(5, Math.min(95, percentage)) + '%';

            let status = '';
            if (acwr < 0.8) {
                status = '<div class="warning-box">âš ï¸ ACWR < 0.8: è®­ç»ƒä¸è¶³æˆ–è¿‡åº¦æ¢å¤ï¼Œå¯èƒ½éœ€è¦å¢åŠ è®­ç»ƒå¼ºåº¦</div>';
            } else if (acwr <= 1.3) {
                status = '<div class="success-box">âœ… ACWR åœ¨å®‰å…¨èŒƒå›´å†… (0.8-1.3)ï¼Œè®­ç»ƒè´Ÿè·å¹³è¡¡åˆç†</div>';
            } else if (acwr <= 1.5) {
                status = '<div class="warning-box">âš ï¸ ACWR > 1.3: è®­ç»ƒå¼ºåº¦æœ‰æ‰€å¢åŠ ï¼Œç»§ç»­ç›‘æ§ï¼Œé¿å…ç»§ç»­å¢åŠ </div>';
            } else {
                status = '<div class="warning-box">ğŸ”´ ACWR > 1.5: é«˜é£é™©åŒºé—´ï¼æŸä¼¤é£é™©æ˜¾è‘—å¢åŠ ï¼Œå»ºè®®ç«‹å³å‡å°‘è®­ç»ƒè´Ÿè·</div>';
            }

            document.getElementById('acwrStatus').innerHTML = status;
            document.getElementById('acwrResult').style.display = 'block';
        }

        // æ•°æ®åˆ†æ
        function updateAnalytics() {
            const data = loadData();
            document.getElementById('trainingDays').textContent = data.length;
            document.getElementById('totalDistance').textContent = data.reduce((sum, r) => sum + r.distance, 0).toFixed(1);
            document.getElementById('injuryEvents').textContent = data.filter(r => r.injury).length;

            drawCharts(data);
        }

        function drawCharts(data) {
            const weeks = new Set(data.map(r => getWeekNumber(new Date(r.date))));
            const weekLabels = Array.from(weeks).sort();

            // è·ç¦»å›¾
            const distanceByWeek = weekLabels.map(week => 
                getWeekData(week).reduce((sum, r) => sum + r.distance, 0)
            );

            const distanceCtx = document.getElementById('distanceChart').getContext('2d');
            new Chart(distanceCtx, {
                type: 'line',
                data: {
                    labels: weekLabels.map(w => `ç¬¬${w}å‘¨`),
                    datasets: [{
                        label: 'å‘¨æ€»é‡Œç¨‹ (km)',
                        data: distanceByWeek,
                        borderColor: '#667eea',
                        backgroundColor: 'rgba(102, 126, 234, 0.1)',
                        tension: 0.4,
                        fill: true,
                        pointRadius: 5,
                        pointBackgroundColor: '#667eea'
                    }]
                },
                options: {
                    responsive: true,
                    maintainAspectRatio: false,
                    plugins: { legend: { display: true } }
                }
            });

            // ä½“é‡å›¾
            const weights = data.filter(r => r.weight > 0);
            if (weights.length > 0) {
                const weightCtx = document.getElementById('weightChart').getContext('2d');
                new Chart(weightCtx, {
                    type: 'line',
                    data: {
                        labels: weights.map(r => r.date),
                        datasets: [{
                            label: 'ä½“é‡ (kg)',
                            data: weights.map(r => r.weight),
                            borderColor: '#e74c3c',
                            backgroundColor: 'rgba(231, 76, 60, 0.1)',
                            tension: 0.4,
                            fill: true
                        }]
                    },
                    options: {
                        responsive: true,
                        maintainAspectRatio: false,
                        plugins: { legend: { display: true } }
                    }
                });
            }

            // ACWRå›¾
            const acwrValues = weekLabels.map(week => calculateWeeklyACWR(week));
            const acwrCtx = document.getElementById('acwrChart').getContext('2d');
            new Chart(acwrCtx, {
                type: 'line',
                data: {
                    labels: weekLabels.map(w => `ç¬¬${w}å‘¨`),
                    datasets: [{
                        label: 'ACWR',
                        data: acwrValues,
                        borderColor: '#f39c12',
                        backgroundColor: 'rgba(243, 156, 18, 0.1)',
                        tension: 0.4,
                        fill: true
                    }, {
                        label: 'å®‰å…¨èŒƒå›´ (0.8-1.3)',
                        data: weekLabels.map(() => 1.05),
                        borderColor: '#27ae60',
                        borderDash: [5, 5],
                        fill: false,
                        pointRadius: 0
                    }]
                },
                options: {
                    responsive: true,
                    maintainAspectRatio: false,
                    plugins: { legend: { display: true } }
                }
            });

            // RPEå’Œç¡çœ å›¾
            const rpeByWeek = weekLabels.map(week => {
                const weekData = getWeekData(week);
                return weekData.length > 0 ? (weekData.reduce((sum, r) => sum + r.rpe, 0) / weekData.length) : 0;
            });

            const sleepByWeek = weekLabels.map(week => {
                const weekData = getWeekData(week);
                return weekData.length > 0 ? (weekData.reduce((sum, r) => sum + r.sleep, 0) / weekData.length) : 0;
            });

            const rpeCtx = document.getElementById('rpeChart').getContext('2d');
            new Chart(rpeCtx, {
                type: 'bar',
                data: {
                    labels: weekLabels.map(w => `ç¬¬${w}å‘¨`),
                    datasets: [{
                        label: 'å¹³å‡RPE (/10)',
                        data: rpeByWeek,
                        backgroundColor: '#667eea',
                        yAxisID: 'y'
                    }, {
                        label: 'å¹³å‡ç¡çœ  (å°æ—¶)',
                        data: sleepByWeek,
                        backgroundColor: '#764ba2',
                        yAxisID: 'y1'
                    }]
                },
                options: {
                    responsive: true,
                    maintainAspectRatio: false,
                    scales: {
                        y: { type: 'linear', position: 'left', max: 10 },
                        y1: { type: 'linear', position: 'right', max: 12 }
                    }
                }
            });
        }

        // å¯¼å‡ºå¯¼å…¥
        function exportData() {
            const data = loadData();
            const json = JSON.stringify(data, null, 2);
            const blob = new Blob([json], { type: 'application/json' });
            const url = URL.createObjectURL(blob);
            const a = document.createElement('a');
            a.href = url;
            a.download = `running_data_${new Date().toISOString().split('T')[0]}.json`;
            a.click();
        }

        function importData() {
            document.getElementById('importFile').click();
        }

        function handleImport(event) {
            const file = event.target.files[0];
            if (!file) return;

            const reader = new FileReader();
            reader.onload = function(e) {
                try {
                    const data = JSON.parse(e.target.result);
                    saveData(data);
                    alert('âœ… æ•°æ®å¯¼å…¥æˆåŠŸ');
                    displayDailyRecords();
                } catch (err) {
                    alert('âŒ æ–‡ä»¶æ ¼å¼é”™è¯¯');
                }
            };
            reader.readAsText(file);
        }

        // é¡µé¢åŠ è½½æ—¶çš„åˆå§‹åŒ–
        window.addEventListener('load', function() {
            displayDailyRecords();
        });
    </script>
</body>
</html>
